{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import { onMount, afterUpdate, tick } from \"svelte\";\r\n  import { Game } from \"./Game\";\r\n  import FontFaceObserver from \"fontfaceobserver\";\r\n\r\n  let icons = new FontFaceObserver(\"Icons\");\r\n  export let log = [];\r\n\r\n  let conf = {};\r\n  let hash = location.hash;\r\n\r\n  let regex = /[?&]([^=#]+)=([^&#]*)/g;\r\n  let url = window.location.href;\r\n  let match;\r\n  let game;\r\n  let gameDiv;\r\n  let gameLog;\r\n  let menuDiv;\r\n  let winDiv;\r\n  let tooltip;\r\n  let lettersLogged = 0;\r\n  let menu = false;\r\n  let winText;\r\n\r\n  while ((match = regex.exec(url))) {\r\n    conf[match[1]] = JSON.parse(match[2]);\r\n  }\r\n\r\n  function updateLog(text) {\r\n    log = game._log;\r\n    lettersLogged = 0;\r\n    gameLog.scrollTop = 1e6;\r\n  }\r\n\r\n  icons.load().then(() => {\r\n    game = new Game(conf);\r\n    game.onLog = updateLog;\r\n    game.onEnd = gameOver;\r\n    game.init();\r\n    gameLog.style.height = gameDiv.clientHeight + \"px\";\r\n    toggleMenu(false);\r\n  });\r\n\r\n  onMount(async () => {\r\n    setInterval(() => {\r\n      if (log && log.length > 0) {\r\n        let last = log[log.length - 1];\r\n        if (lettersLogged < last.length) {\r\n          lettersLogged =\r\n            Math.ceil((last.length - lettersLogged) / 40) + lettersLogged;\r\n          gameLog.scrollTop = gameLog.scrollHeight;\r\n        }\r\n      }\r\n    }, 10);\r\n  });\r\n\r\n  function toggleTooltip(text) {\r\n    tooltip.innerHTML = text;\r\n    let classes = tooltip.classList;\r\n    if (text) {\r\n      classes.add(\"visible\");\r\n    } else {\r\n      classes.remove(\"visible\");\r\n    }\r\n  }\r\n\r\n  function timeout(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  window.addEventListener(\"mousemove\", async e => {\r\n    if (menu) return;\r\n\r\n    if (Math.abs(e.movementY) + Math.abs(e.movementX) > 3) {\r\n      toggleTooltip(null);\r\n      await timeout(30);\r\n    }\r\n\r\n    if (tooltip) {\r\n      tooltip.style.left = e.clientX + \"px\";\r\n      tooltip.style.top = e.clientY + \"px\";\r\n      if (game) {\r\n        toggleTooltip(game.tooltip);\r\n      }\r\n    }\r\n  });\r\n\r\n  window.addEventListener(\"keydown\", e => {\r\n    if (e.code == \"Escape\") {\r\n      if(winText){\r\n        winText = null;        \r\n      } else {\r\n        toggleMenu(!menu);\r\n      }\r\n    }\r\n  });\r\n\r\n  function toggleMenu(on) {\r\n    menu = on;\r\n    game.paused = on;\r\n    menuDiv.style.opacity = on ? 1 : 0;\r\n    menuDiv.style[\"pointer-events\"] = on ? \"auto\" : \"none\";\r\n    if (on) {\r\n      toggleTooltip(null);\r\n    }\r\n  }\r\n\r\n  function save(slot) {\r\n    game.save(slot);\r\n    toggleMenu(false);\r\n  }\r\n\r\n  function load(slot) {\r\n    game.load(slot);\r\n    toggleMenu(false);\r\n  }\r\n\r\n  function newGame() {\r\n    game.start();\r\n    toggleMenu(false);\r\n  }\r\n\r\n  async function gameOver(text) {\r\n    toggleMenu(true);\r\n    winText = text;\r\n    await tick();    \r\n    winDiv.style.opacity = 0;\r\n    window.setTimeout((() => winDiv.style.opacity = 1), 100)\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .log {\r\n    vertical-align: bottom;\r\n    font-family: Icons;\r\n    overflow-y: auto;\r\n    height: 100px;\r\n    margin-left: 1px;\r\n    max-width: 600px;\r\n  }\r\n  .main-table {\r\n    border: 2px solid white;\r\n    display: flex;\r\n    padding: 1px;\r\n    justify-content: center;\r\n  }\r\n  .main-table > div {\r\n    border: 2px solid white;\r\n  }\r\n  .mainer-table {\r\n    display: flex;\r\n  }\r\n\r\n  .menu-table {\r\n    display: flex;\r\n    padding: 1px;\r\n    justify-content: center;\r\n  }\r\n  .menu-table > div {\r\n    border: 2px solid white;\r\n  }\r\n\r\n  .tooltip {\r\n    position: fixed;\r\n    z-index: 10;\r\n    background: black;\r\n    padding: -2px;\r\n    transform: translate(20px, -50%);\r\n    box-shadow: 0px 0px 10px 10px black;\r\n    font-family: Icons;\r\n  }\r\n  .record {\r\n    border-top: solid 0.5px grey;\r\n    padding: 3px;\r\n  }\r\n  .menu {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    background: rgba(0, 0, 0, 1);\r\n    opacity: 0;\r\n    z-index: 3;\r\n    font-size: 24pt;\r\n    padding: 10px;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    transition: opacity 0.2s ease-in-out;\r\n    cursor: default;\r\n  }\r\n  .save {\r\n    margin: 5px;\r\n  }\r\n  .save button {\r\n    width: 100px;\r\n    padding: 3px;\r\n  }\r\n  .saves {\r\n    text-align: left;\r\n    margin-left: 1px;\r\n  }\r\n  h1 {\r\n    color: red;\r\n    font-weight: bold;\r\n  }\r\n  button {\r\n    font-size: 18pt;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .win {\r\n    text-align: left;\r\n    font-size: 18pt;\r\n    width:600px;\r\n    margin: auto;\r\n    opacity: 0;\r\n    transition: opacity 10s ease-in-out;\r\n  }\r\n\r\n  .win button{\r\n    margin-top: 50px;\r\n    border: 1px solid white;\r\n  }\r\n\r\n  :global(.she){\r\n    color:#ff4000;\r\n    padding-top: 5px;\r\n  }\r\n\r\n  :global(.you){\r\n    color:white;\r\n    padding-top: 5px;\r\n  }\r\n\r\n  :global(.ending-type){\r\n    margin-top: 30px;\r\n    font-size: 24px;\r\n    text-align: center;    \r\n  }\r\n</style>\r\n\r\n<div class=\"tooltip fadein\" bind:this={tooltip}>Tooltip</div>\r\n\r\n<div class=\"menu\" bind:this={menuDiv}>\r\n\r\n  {#if winText}\r\n    <div class=\"win\" id=\"win\" bind:this={winDiv}>\r\n      {@html winText}\r\n      <div style=\"text-align:center;\">\r\n        <button on:click={() => (winText = null)}>Continue</button>\r\n      </div>\r\n    </div>\r\n  {:else}\r\n    <h1>Seeing Red</h1>\r\n    <div class=\"menu-table\">\r\n      <div style=\"text-align:center;\">\r\n        <div><button on:click={() => newGame()}>New Game</button></div>\r\n        <div><button on:click={() => toggleMenu(false)}>Continue</button></div>\r\n      </div>\r\n      <div class=\"saves\">\r\n        {#each [1, 2, 3, 4, 5, 6, 7, 8, 9] as slot}\r\n          <div class=\"save\">\r\n             {slot}.\r\n            <button on:click={() => save(slot)}>Save</button>\r\n            {#if game && game.hasSave(slot)}\r\n              <button on:click={() => load(slot)}>Load</button>\r\n            {/if}\r\n          </div>\r\n        {/each}\r\n      </div>\r\n    </div>\r\n  {/if}\r\n</div>\r\n\r\n<div class=\"mainer-table\">\r\n  <div class=\"main-table\">\r\n    <div\r\n      class=\"game\"\r\n      id=\"game\"\r\n      on:contextmenu={e => e.preventDefault()}\r\n      bind:this={gameDiv} />\r\n\r\n    <div class=\"log\" bind:this={gameLog}>\r\n      {#if log.length}\r\n        {#each log.slice(0, log.length - 1) as record}\r\n          <div class=\"record\">\r\n            {@html record}\r\n          </div>\r\n        {/each}\r\n        <div class=\"record\">\r\n          {@html log[log.length - 1].substr(0, lettersLogged)}\r\n        </div>\r\n      {/if}\r\n    </div>\r\n  </div>\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "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"
}